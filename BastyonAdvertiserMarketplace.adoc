## PocketNet Idea: Advertiser Marketplace

Create new type of mempool marketplace transaction with a expiration of 2 weeks, allowing for bids/auctions sales of advertisements on content creator feeds.  These transactions will populate across the node using same mechanism as mempool transactions, but will have a longer expiration time to allow for acceptance by the recipient of the adversitement.  If the transaction is not accepted by the recipient there will be no long-term impact to the size of the block chain.  The same mechanism can allow for future expansion to auctions with only the final winning auction price needing storage on the block chain.

First iteration will be advertiser marketplace, sell advertisements on a channel's posts/videos/feeds.

Marketplace transaction is initiated with a few parameters:

- username or ID of purchaser
 - username or wallet ID of target accounts
 - Bid amount for advertisement in PKOIN
 - Transaction expiration of max 2 weeks
 - Time period of promotion in block count (minutes) -> front end can display this as hours/days/weeks
 - Content either video or post + photo which will be linked to as a post or video in the requesting users account
    - Sponsored Video content will appear at beginning of videos from recipient user for given time period with watermark indicating it is sponsored content
    - Sponsored post will appear feed query in top 5 posts of the users feed -> the users name will appear at the top of the post with [sponsored content] label so viewer knows

The content creator who is recieving the advertisement request will get a pop-up in the pocketnet app showing that they have a pending advertisement request.  From the request they will be able to view the advertisement content, PKOIN amount, time period of the advertisement, and accept or decline buttons.  If they decline the status of the transaction will be updated in the mempool so the requester can get notification the next time they sign in.  If the recipient accepts, the transaction immediate is converted into a channel advertisement transaction which links the original advertisement contents with a PKOIN transaction from requesting user to recipient.  Nodes will scan for advertiser content when processing API requests to fetch the user's feed, and ensure advertisement is placed in top 5 posts in users feed.  If multiple advertisements are present they will appear one in every five groups of posts with the highest bid showing higher in the feed (or we a define light weight - weighted algorithm for post order).

## Future Expansions:
1.  allow recipient of advertisement to counter-offer.
2. Allow users who have accepted advertisements in the past, to set an advertisement rate as a parameter in their user profile.


## Workflow Example:

The workflow below illustrates how an advertisement would be placed between two users.  User 'A'  (Advertiser) who wishes to place an add on user 'C' (Content Creator) channel.

1.   User A opens the advanced user panel of the Bastion app, and selects option to place an advertisement.  User A fills out fields including PKOIN amount, duration of the advertisement, and link to the content from User A's feed they wish to advertise.   User A fills in the username of User C which they wish to advertise with.  The Bastyon app helps autocomplete the username field, and create the metadata including pocketnet account ID of User C.

2. Bastyon app signs the request with User A's private key, and sends out the advertisement transaction as a API request to the PocketNet node it is connected to.  This transaction is propagated out through the entire network as a specialized mempool transaction which a maximum expiration time of two weeks.  These transactions are managed seperately from the mempool used for coin transactions, but use similar mechanisms for propagation, epiry, and managment.

3. User C signs into the Bastyon app.  They recieve a notification that they have recieved a advertisement request.  They click on the notification which takes them to the user/advanced/advertisements panel of the bastyon Application.  User C is presented with the proposed advertisement content,  PKOIN amount, time duration, and an accept and decline buttons.

[declined workflow]

4a.  User C clicks decline.  The Bastyon application appends a field in the request indicating the request was declined, and signs the request with User C's private key.  The request is issued via API to the connected node. 

5a. Declined request is propagated throughout the node network, and as nodes recieve the request they replace the original request in the mempool.

6a. User A signs into the bastyon app.   They see in their notifications that the advertisement request to user C was declined.  The request is allow to expire normally from the node mempool.

[accepted workflow]

4b. User C clicks accept.  The Bastyon app appends a field to the request indicating the request was accepted, and signs the request with User C's private key.  The request is issued via API to the connected node.

5b. Accepted request is propagated across nodes and queued for inclusion into the blockchain.  Once the multi-sig transaction has been accepted into a block, the PKOIN amount will be transfered to User C's wallet, and API requests for user C's post history will include the advertised content.

6b. User A signs into the Bastyon app and sees in their notifications that their advertisement was accepted by User C.

##Test Plan
Develop unit test to verify each step in workflow above between to parties.
Unit test to verify advertised content appears as expected in target feed.


Exploits/Security Risks
[TBD]

